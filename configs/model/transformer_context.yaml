# 构建上下文编码器（实体上下文 ID 序列 → 序列表征 r' 与池化向量）
# 与实体编码器同构；可选择共享嵌入表
# 由 kan.utils.registry 构建：HUB['context_encoder']

name: context_encoder
type: transformer_context_id
seed: 42

embedding:
  share_with_entity_encoder: true  # 若实现支持，则与实体编码器权重共享
  vocab_size: null                 # 未共享时需提供；共享时忽略
  embedding_dim: 100               # 与 D 对齐
  padding_idx: 0
  pretrained_path: null
  trainable: true

encoder:
  xformer_layers: 1
  xformer_heads: 4
  ffn_dim: 2048
  dropout: 0.5
  activation: gelu

# 聚合（对 Lc、再对 E）
pooling:
  inner_pooling: mean        # Lc 聚合（r' 的内部）
  entity_pooling: mean       # E 聚合（得到每样本 r 向量）

return_raw_contexts: false