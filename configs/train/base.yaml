# 通用训练配置（所有数据集的默认）

seed: 42
bf16: false        # Windows / 老 GPU 可改为 false
fp16: false
torch_compile: false

data:
  # 用于从 datasets cache 里找 prepared 数据集的别名
  name: politifact            # 默认，可以被具体 5fold 配置覆盖
  # 这里的 config 是「数据集 YAML」，会被 _resolve_data_cfg 解析加载
  config: configs/data/politifact.yaml

  # 逻辑 split 名称（传给 loader.has_split/load_split）
  train_split: train
  validation_split: validation
  test_split: test

  # 交叉验证相关（可被 5fold yaml 覆盖）
  split:
    kfold:
      index: null             # 具体 fold index 交给 politifact_5fold.yaml
      total: 5

train:
  batch_size: 32
  eval_batch_size: 32
  max_epochs: 5

  optimizer:
    lr: 2e-5
    weight_decay: 0.01

  grad_accum: 1

  logging:
    every_n_steps: 50

  dataloader:
    num_workers: 0           # Windows 友好，后面可以改成 >0

  evaluation_strategy: epoch
  save_strategy: epoch
  save_total_limit: 3
  report_to: []              # ["wandb"] 等

model:
  # 文本编码器：HF 文本 backbone 的配置文件（内部再转为 TextEncoderConfig）
  text_encoder: configs/model/transformer_text.yaml

  # 实体与上下文 encoder 的超参
  entity_encoder: configs/model/transformer_entity.yaml
  context_encoder: configs/model/transformer_context.yaml

  # 注意力融合模块
  fusion:
    ne: configs/model/fusion/ne.yaml
    ne2c: configs/model/fusion/ne2c.yaml

  # 分类头
  head: configs/model/head.yaml
