# PolitiFact（政治断言事实核查类新闻）
# 继承 common 默认，覆盖数据源与少量策略。

base: common.yaml

name: politifact
source:
  dataset: PolitiFact
  homepage: https://www.politifact.com/
  paper_ref: KAN-2020

paths:
  raw_dir: datasets/politifact/raw/
  processed_dir: datasets/politifact/processed

fields:
  id_col: id
  text_col: content            # 原始字段名可能为 content/text
  label_col: label             # {0: fake, 1: real} 或 {fake, real}
  timestamp_col: publish_time  # 若无则置 null

preprocess:
  strip_html: true
  normalize_whitespace: true
  remove_urls: true
  lowercase: true
  deduplicate_by_text: true
  max_len: 512
  tokenizer:
    type: word
    model_name: null
    pad_to_max_len: true
    pad_token_id: 0

split:
  method: stratified
  ratios: [0.8, 0.1, 0.1]
  group_by_id: true
  folds: null

class_map:
  fake: 0
  real: 1
  drop_others: true            # 若出现其他标签，丢弃或重映射

el:
  provider: spacy_blink
  threshold: 0.7
  max_mentions_per_doc: 64
  max_candidates: 5
  cache:
    dir: .cache/kan/el/politifact
    overwrite: false
  rate_limit:
    rps: 5
    burst: 10

kg:
  provider: wikidata
  endpoint: https://query.wikidata.org/sparql
  hop: 1
  neighbors_k: 10
  relation_types: ["P31", "P279", "P361", "P527"]
  retries: 3
  backoff: 0.5
  cache:
    dir: .cache/kan/kg/politifact
    overwrite: false
  rate_limit:
    rps: 2
    burst: 4

vectorizer:
  type: glove
  dim: 100
  glove:
    path: embeddings/glove.6B.100d.txt
    oov_init: uniform
    oov_range: 0.05
  normalize: l2

batcher:
  batch_size: 64
  num_workers: 4
  pin_memory: true
  bucket_by_length: true
  sortish_sampler: true
  pad_id: 0

runtime:
  tqdm: true
  dry_run: false
